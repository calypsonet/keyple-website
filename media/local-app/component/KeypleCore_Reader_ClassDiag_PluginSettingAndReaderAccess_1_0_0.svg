<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="939px" preserveAspectRatio="none" style="width:1150px;height:939px;" version="1.1" viewBox="0 0 1150 939" width="1150px" zoomAndPan="magnify"><defs/><g><!--MD5=[c3c915b379c717332e210d38dcd6e8a2]
cluster org.eclipse.keyple.core--><polygon fill="#FFFFFF" points="22,24,193,24,200,47.6094,1128,47.6094,1128,927,22,927,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="200" y1="47.6094" y2="47.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="26" y="40.5332">org.eclipse.keyple.core</text><!--MD5=[7579d5565d2521d5936cec86ed3dadee]
cluster service--><polygon fill="#FFFFFF" points="46,68,105,68,112,91.6094,1104,91.6094,1104,903,46,903,46,68" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="46" x2="112" y1="91.6094" y2="91.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="50" y="84.5332">service</text><!--MD5=[2e31800f208179cab94650aeb782e4d8]
cluster event--><polygon fill="#FFFFFF" points="343,599,390,599,397,622.6094,1080,622.6094,1080,879,343,879,343,599" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="343" x2="397" y1="622.6094" y2="622.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="347" y="615.5332">event</text><!--MD5=[5c68026ea752d2e8f1e184b2d7c89ced]
class PluginFactory--><rect fill="#FEFECE" height="75.6719" id="PluginFactory" style="stroke: #D4AC0D; stroke-width: 1.5;" width="149" x="275.5" y="170"/><ellipse cx="304.45" cy="186" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M305.45,183 L305.45,189 L307.45,189 L307.9344,189 L308.45,189.625 L308.45,190 L308.45,190.375 L307.9344,191 L307.45,191 L301.45,191 L300.9656,191 L300.45,190.375 L300.45,190 L300.45,189.625 L300.9656,189 L301.45,189 L303.45,189 L303.45,183 L301.45,183 L300.9656,183 L300.45,182.375 L300.45,182 L300.45,181.625 L300.9656,181 L301.45,181 L307.45,181 L307.9344,181 L308.45,181.625 L308.45,182 L308.45,182.375 L307.9344,183 L307.45,183 L305.45,183 Z "/><ellipse cx="326.55" cy="185.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="75" x="332.55" y="190.9102">PluginFactory</text><line style="stroke: #D4AC0D; stroke-width: 1.5;" x1="276.5" x2="423.5" y1="202" y2="202"/><line style="stroke: #D4AC0D; stroke-width: 1.5;" x1="276.5" x2="423.5" y1="210" y2="210"/><ellipse cx="286.5" cy="221" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="295.5" y="225.4189">String getPluginName()</text><ellipse cx="286.5" cy="234.8359" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="295.5" y="239.2549">Plugin getPluginInstance()</text><!--MD5=[bc3f57c567736ad71a70f1388d085699]
class SmartCardService--><rect fill="#FEFECE" height="208.3828" id="SmartCardService" style="stroke: #D4AC0D; stroke-width: 1.5;" width="263" x="499.5" y="104"/><ellipse cx="557.75" cy="124.0938" fill="#ADD1B2" rx="11" ry="11" style="stroke: #ADD1B2; stroke-width: 1.0;"/><path d="M559.75,120.5938 Q559.9531,120.0938 560.1875,119.8438 Q560.4219,119.5938 560.6875,119.5938 Q561.1563,119.5938 561.4531,119.875 Q561.75,120.1563 561.75,120.8125 L561.75,122.375 Q561.75,123.0313 561.4688,123.3125 Q561.1875,123.5938 560.75,123.5938 Q560.3594,123.5938 560.1094,123.4219 Q559.8594,123.25 559.75,122.7969 Q559.7031,122.4844 559.5313,122.3125 Q559.2188,121.9844 558.6563,121.7969 Q558.0938,121.5938 557.5313,121.5938 Q556.8281,121.5938 556.2344,121.875 Q555.6563,122.1563 555.2031,122.7813 Q554.75,123.4063 554.75,124.2656 L554.75,125.1875 Q554.75,126.2188 555.5938,126.9063 Q556.4375,127.5938 557.9375,127.5938 Q558.8281,127.5938 559.4531,127.3906 Q559.8125,127.2813 560.2188,126.9219 Q560.4844,126.7188 560.625,126.6563 Q560.7656,126.5938 560.9375,126.5938 Q561.2656,126.5938 561.5,126.8594 Q561.75,127.1094 561.75,127.4688 Q561.75,127.8125 561.4063,128.2188 Q560.9063,128.8125 560.1094,129.1406 Q559.0625,129.5938 557.7813,129.5938 Q556.2813,129.5938 555.0781,129 Q554.1094,128.5313 553.4219,127.5156 Q552.75,126.5 552.75,125.2969 L552.75,124.2031 Q552.75,122.9531 553.3438,121.8594 Q553.9531,120.7656 555,120.1875 Q556.0625,119.5938 557.25,119.5938 Q557.9688,119.5938 558.5938,119.8438 Q559.2188,120.0938 559.75,120.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="66" x="614.25" y="121.457">«Singleton»</text><ellipse cx="583.25" cy="131.1406" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="589.25" y="136.5508">final</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="616.25" y="136.5508">SmartCardService</text><line style="stroke: #D4AC0D; stroke-width: 1.5;" x1="500.5" x2="761.5" y1="144.1875" y2="144.1875"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="507.5" y="152.1875"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="23" x="519.5" y="159.6064">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="164" x="545.5" y="159.6064">SmartCardService uniqueInstance</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="507.5" y="166.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="519.5" y="173.4424">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="545.5" y="173.4424">ConcurrentMap&lt;String, Plugin&gt; plugins</text><line style="stroke: #D4AC0D; stroke-width: 1.5;" x1="500.5" x2="761.5" y1="179.8594" y2="179.8594"/><ellipse cx="510.5" cy="190.8594" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="155" x="519.5" y="195.2783">SmartCardService getInstance()</text><ellipse cx="510.5" cy="204.6953" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="519.5" y="209.1143">String getVersion()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="522.5" y="222.9502"/><ellipse cx="510.5" cy="232.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="237" x="519.5" y="236.7861">Plugin registerPlugin(PluginFactory pluginFactory)</text><ellipse cx="510.5" cy="246.2031" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="519.5" y="250.6221">boolean isRegistered(String pluginName)</text><ellipse cx="510.5" cy="260.0391" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="212" x="519.5" y="264.458">boolean unregisterPlugin(String pluginName)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="522.5" y="278.2939"/><ellipse cx="510.5" cy="287.7109" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="519.5" y="292.1299">Plugin getPlugin(String name)</text><ellipse cx="510.5" cy="301.5469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="519.5" y="305.9658">Map&lt;String, Plugin&gt; getPlugins()</text><!--MD5=[b628511dd50102041730ee0512f882c8]
class Plugin--><rect fill="#F0FFFF" height="117.1797" id="Plugin" style="stroke: #0000FF; stroke-width: 1.5;" width="194" x="394" y="404"/><ellipse cx="463.75" cy="420" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M464.75,417 L464.75,423 L466.75,423 L467.2344,423 L467.75,423.625 L467.75,424 L467.75,424.375 L467.2344,425 L466.75,425 L460.75,425 L460.2656,425 L459.75,424.375 L459.75,424 L459.75,423.625 L460.2656,423 L460.75,423 L462.75,423 L462.75,417 L460.75,417 L460.2656,417 L459.75,416.375 L459.75,416 L459.75,415.625 L460.2656,415 L460.75,415 L466.75,415 L467.2344,415 L467.75,415.625 L467.75,416 L467.75,416.375 L467.2344,417 L466.75,417 L464.75,417 Z "/><ellipse cx="489.25" cy="419.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="35" x="495.25" y="424.9102">Plugin</text><line style="stroke: #0000FF; stroke-width: 1.5;" x1="395" x2="587" y1="436" y2="436"/><line style="stroke: #0000FF; stroke-width: 1.5;" x1="395" x2="587" y1="444" y2="444"/><ellipse cx="405" cy="455" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="414" y="459.4189">String getName()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="417" y="473.2549"/><ellipse cx="405" cy="482.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="414" y="487.0908">Map&lt;String, Reader&gt; getReaders()</text><ellipse cx="405" cy="496.5078" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="414" y="500.9268">Set&lt;String&gt; getReaderNames()</text><ellipse cx="405" cy="510.3438" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="414" y="514.7627">Reader getReader(String name)</text><!--MD5=[e86a4777f2c0372cf9fb3cd047e1466e]
class Reader--><rect fill="#EEFFEE" height="144.8516" id="Reader" style="stroke: #008000; stroke-width: 1.5;" width="360" x="674" y="390"/><ellipse cx="823.75" cy="406" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M824.75,403 L824.75,409 L826.75,409 L827.2344,409 L827.75,409.625 L827.75,410 L827.75,410.375 L827.2344,411 L826.75,411 L820.75,411 L820.2656,411 L819.75,410.375 L819.75,410 L819.75,409.625 L820.2656,409 L820.75,409 L822.75,409 L822.75,403 L820.75,403 L820.2656,403 L819.75,402.375 L819.75,402 L819.75,401.625 L820.2656,401 L820.75,401 L826.75,401 L827.2344,401 L827.75,401.625 L827.75,402 L827.75,402.375 L827.2344,403 L826.75,403 L824.75,403 Z "/><ellipse cx="849.25" cy="405.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="41" x="855.25" y="410.9102">Reader</text><line style="stroke: #008000; stroke-width: 1.5;" x1="675" x2="1033" y1="422" y2="422"/><line style="stroke: #008000; stroke-width: 1.5;" x1="675" x2="1033" y1="430" y2="430"/><ellipse cx="685" cy="441" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="694" y="445.4189">String getName()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="697" y="459.2549"/><ellipse cx="685" cy="468.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="694" y="473.0908">boolean isCardPresent()</text><ellipse cx="685" cy="482.5078" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="694" y="486.9268">boolean isContactlessTransmission()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="697" y="500.7627"/><ellipse cx="685" cy="510.1797" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="334" x="694" y="514.5986">activateProtocol(String applicationReference, String pluginReference)</text><ellipse cx="685" cy="524.0156" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="230" x="694" y="528.4346">deactivateProtocol(String applicationReference)</text><!--MD5=[c8cbac6d6d9e600bce6d5400427f5af6]
class PoolPlugin--><rect fill="#F0FFFF" height="89.5078" id="PoolPlugin" style="stroke: #0000FF; stroke-width: 1.5;" width="262" x="62" y="704"/><ellipse cx="153.25" cy="720" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M154.25,717 L154.25,723 L156.25,723 L156.7344,723 L157.25,723.625 L157.25,724 L157.25,724.375 L156.7344,725 L156.25,725 L150.25,725 L149.7656,725 L149.25,724.375 L149.25,724 L149.25,723.625 L149.7656,723 L150.25,723 L152.25,723 L152.25,717 L150.25,717 L149.7656,717 L149.25,716.375 L149.25,716 L149.25,715.625 L149.7656,715 L150.25,715 L156.25,715 L156.7344,715 L157.25,715.625 L157.25,716 L157.25,716.375 L156.7344,717 L156.25,717 L154.25,717 Z "/><ellipse cx="178.75" cy="719.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="184.75" y="724.9102">PoolPlugin</text><line style="stroke: #0000FF; stroke-width: 1.5;" x1="63" x2="323" y1="736" y2="736"/><line style="stroke: #0000FF; stroke-width: 1.5;" x1="63" x2="323" y1="744" y2="744"/><ellipse cx="73" cy="755" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="236" x="82" y="759.4189">SortedSet&lt;String&gt; getReaderGroupReferences()</text><ellipse cx="73" cy="768.8359" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="228" x="82" y="773.2549">Reader allocateReader(String groupReference)</text><ellipse cx="73" cy="782.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="82" y="787.0908">releaseReader(Reader reader)</text><!--MD5=[1fa9a61019755e60a0cb03f0bc3590aa]
class ObservablePlugin--><rect fill="#F0FFFF" height="103.3438" id="ObservablePlugin" style="stroke: #0000FF; stroke-width: 1.5;" width="263" x="359.5" y="697.5"/><ellipse cx="431.25" cy="713.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M432.25,710.5 L432.25,716.5 L434.25,716.5 L434.7344,716.5 L435.25,717.125 L435.25,717.5 L435.25,717.875 L434.7344,718.5 L434.25,718.5 L428.25,718.5 L427.7656,718.5 L427.25,717.875 L427.25,717.5 L427.25,717.125 L427.7656,716.5 L428.25,716.5 L430.25,716.5 L430.25,710.5 L428.25,710.5 L427.7656,710.5 L427.25,709.875 L427.25,709.5 L427.25,709.125 L427.7656,708.5 L428.25,708.5 L434.25,708.5 L434.7344,708.5 L435.25,709.125 L435.25,709.5 L435.25,709.875 L434.7344,710.5 L434.25,710.5 L432.25,710.5 Z "/><ellipse cx="456.75" cy="713" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="100" x="462.75" y="718.4102">ObservablePlugin</text><line style="stroke: #0000FF; stroke-width: 1.5;" x1="360.5" x2="621.5" y1="729.5" y2="729.5"/><line style="stroke: #0000FF; stroke-width: 1.5;" x1="360.5" x2="621.5" y1="737.5" y2="737.5"/><ellipse cx="370.5" cy="748.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="379.5" y="752.9189">addObserver(</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="447.5" y="752.9189">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="473.5" y="752.9189">PluginObserver observer)</text><ellipse cx="370.5" cy="762.3359" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="379.5" y="766.7549">removeObserver(</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="465.5" y="766.7549">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="491.5" y="766.7549">PluginObserver observer)</text><ellipse cx="370.5" cy="776.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="379.5" y="780.5908">clearObservers()</text><ellipse cx="370.5" cy="790.0078" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="379.5" y="794.4268">int countObservers()</text><!--MD5=[e2341a3d5316e117132fc49473ae3219]
class ObservableReader--><rect fill="#EEFFEE" height="227.8672" id="ObservableReader" style="stroke: #008000; stroke-width: 1.5;" width="406" x="658" y="635"/><ellipse cx="798.25" cy="651" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M799.25,648 L799.25,654 L801.25,654 L801.7344,654 L802.25,654.625 L802.25,655 L802.25,655.375 L801.7344,656 L801.25,656 L795.25,656 L794.7656,656 L794.25,655.375 L794.25,655 L794.25,654.625 L794.7656,654 L795.25,654 L797.25,654 L797.25,648 L795.25,648 L794.7656,648 L794.25,647.375 L794.25,647 L794.25,646.625 L794.7656,646 L795.25,646 L801.25,646 L801.7344,646 L802.25,646.625 L802.25,647 L802.25,647.375 L801.7344,648 L801.25,648 L799.25,648 Z "/><ellipse cx="823.75" cy="650.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106" x="829.75" y="655.9102">ObservableReader</text><line style="stroke: #008000; stroke-width: 1.5;" x1="659" x2="1063" y1="667" y2="667"/><line style="stroke: #008000; stroke-width: 1.5;" x1="659" x2="1063" y1="675" y2="675"/><ellipse cx="669" cy="686" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="678" y="690.4189">addObserver(</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="746" y="690.4189">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="772" y="690.4189">ReaderObserver observer)</text><ellipse cx="669" cy="699.8359" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="678" y="704.2549">removeObserver(</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="764" y="704.2549">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="790" y="704.2549">ReaderObserver observer)</text><ellipse cx="669" cy="713.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="678" y="718.0908">clearObservers()</text><ellipse cx="669" cy="727.5078" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="678" y="731.9268">int countObservers()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="681" y="745.7627"/><ellipse cx="669" cy="755.1797" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="269" x="678" y="759.5986">setDefaultSelections(AbstractDefaultSelectionsRequest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="678" y="773.4346">selectionsR, NotificationMode notificationM)</text><ellipse cx="669" cy="782.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="380" x="678" y="787.2705">setDefaultSelectionsAndStartCardDetection(AbstractDefaultSelectionsRequest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="311" x="678" y="801.1064">selectionsR, NotificationMode notificationM, PollingMode pollingM)</text><ellipse cx="669" cy="810.5234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="213" x="678" y="814.9424">startCardDetection(PollingMode pollingMode)</text><ellipse cx="669" cy="824.3594" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="678" y="828.7783">stopCardDetection()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="681" y="842.6143"/><ellipse cx="669" cy="852.0313" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="678" y="856.4502">finalizeCardProcessing()</text><!--MD5=[230717490673261be3b1e9de94e2929c]
link SmartCardService to Plugin--><path d="M568.0365,322.561 C568.0365,322.561 541.106,371.131 529.287,392.446 " fill="none" id="SmartCardService-Plugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="522.891,403.983,530.7535,398.0516,525.3156,399.6102,523.757,394.1723,522.891,403.983" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="525.3156" x2="529.1945" y1="399.6102" y2="392.6135"/><polygon fill="#A80036" points="573.855,312.066,567.4474,315.374,568.0365,322.561,574.4441,319.253,573.855,312.066" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="557" y="356.4951">plugins</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="562.4014" y="333.7898">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="521.6567" y="392.9666">*</text><!--MD5=[8b513e08943f8bfe5c241563ffc49ec0]
link Plugin to Reader--><path d="M600.277,462.5 C600.277,462.5 640.295,462.5 660.475,462.5 " fill="none" id="Plugin-Reader" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="673.755,462.5,664.755,458.5,668.755,462.5,664.755,466.5,673.755,462.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="668.755" x2="660.755" y1="462.5" y2="462.5"/><polygon fill="#A80036" points="588.277,462.5,594.277,466.5,600.277,462.5,594.277,458.5,588.277,462.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="609.5" y="455.9951">readers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="595.9927" y="459.3892">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="661.0454" y="459.6682">*</text><!--MD5=[2219806bdc996f946b60beec9aa5725f]
reverse link Plugin to PoolPlugin--><path d="M405.903,534.344 C384.982,552.43 362.888,572.11 343,591 C304.323,627.735 262.575,671.827 232.967,703.919 " fill="none" id="Plugin&lt;-PoolPlugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="401.511,528.889,421.247,521.179,410.627,539.514,401.511,528.889" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="371" y="579.4951">extends</text><!--MD5=[550a12816f88094ca7e979a72eedae9c]
reverse link Plugin to ObservablePlugin--><path d="M491,541.104 C491,590.783 491,653.824 491,697.188 " fill="none" id="Plugin&lt;-ObservablePlugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="484,541.073,491,521.073,498,541.073,484,541.073" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="492" y="579.4951">extends</text><!--MD5=[495ccb80ac82bdc45a1b0288016f2c00]
reverse link Reader to ObservableReader--><path d="M856.263,555.467 C856.886,580.808 857.57,608.594 858.219,634.977 " fill="none" id="Reader&lt;-ObservableReader" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="849.261,555.458,855.766,535.291,863.256,555.113,849.261,555.458" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="857" y="579.4951">extends</text><!--MD5=[d842569d2f438607af8ed0fb4cdffa11]
link PluginFactory to SmartCardService--><path d="M424.565,208 C447.572,208 473.629,208 499.294,208 " fill="none" id="PluginFactory-SmartCardService" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="443" y="201.4951">sets</text><polygon fill="#000000" points="471,194.6758,477,197.6758,471,200.6758,471,194.6758" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="432.5123" y="204.7052">*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="484.4774" y="205.0317">1</text><!--MD5=[a4001258c8db405fbf0ed58a92e714fd]
link PluginFactory to Plugin--><path d="M370.805,246.257 C393.291,286.524 429.5,351.366 456.306,399.37 " fill="none" id="PluginFactory-&gt;Plugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="458.87,403.962,457.9733,394.1541,456.4317,399.5968,450.989,398.0553,458.87,403.962" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="434" y="356.4951">creates</text><polygon fill="#000000" points="451,365.3516,454,371.3516,457,365.3516,451,365.3516" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="366.563" y="267.1785">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="447.3049" y="392.9429">1</text><!--MD5=[2ccc684a09cf812729bc4ccdb7f348e0]
@startuml
skinparam ClassBorderColor #D4AC0D
skinparam stereotypeABorderColor #A9DCDF
skinparam stereotypeIBorderColor #B4A7E5
skinparam stereotypeCBorderColor #ADD1B2
skinparam stereotypeEBorderColor #EB93DF
skinparam shadowing false

skinparam StateBorderColor #D4AC0D
skinparam ActivityBorderColor #D4AC0D

skinparam ClassBackgroundColor<<red>> #FDEDEC
skinparam ClassBorderColor<<red>> #E74C3C
hide <<red>> stereotype
skinparam ClassBackgroundColor<<purple>> #F4ECF7
skinparam ClassBorderColor<<purple>> #8E44AD
hide <<purple>> stereotype
skinparam ClassBackgroundColor<<blue>> #EBF5FB
skinparam ClassBorderColor<<blue>> #3498DB
hide <<blue>> stereotype
skinparam ClassBackgroundColor<<green>> #EAFAF1
skinparam ClassBorderColor<<green>> #2ECC71
hide <<green>> stereotype

skinparam ClassBackgroundColor<<orange>> #FDF2E9
skinparam ClassBorderColor<<orange>> #E67E22
hide <<orange>> stereotype

skinparam ClassBackgroundColor<<grey>> #EAECEE
skinparam ClassBorderColor<<grey>> #2C3E50
hide <<grey>> stereotype

package org.eclipse.keyple.core #FFFFFF {
  package service #FFFFFF {
+interface PluginFactory {
  +String getPluginName()
  +Plugin getPluginInstance()
}
+class "<b>final</b> SmartCardService" as SmartCardService << Singleton >> {
  -<b>final</b> {static}SmartCardService uniqueInstance
  -<b>final</b> ConcurrentMap<String, Plugin> plugins
  +{static}SmartCardService getInstance()
  +String getVersion()

  +Plugin registerPlugin(PluginFactory pluginFactory)
  +boolean isRegistered(String pluginName)
  +boolean unregisterPlugin(String pluginName)

  +Plugin getPlugin(String name)
  +Map<String, Plugin> getPlugins()
}
+interface Plugin {
  +String getName()

  +Map<String, Reader> getReaders()
  +Set<String> getReaderNames()
  +Reader getReader(String name)
}
+interface Reader {
  +String getName()

  +boolean isCardPresent()
  +boolean isContactlessTransmission()

  +activateProtocol(String applicationReference, String pluginReference)
  +deactivateProtocol(String applicationReference)
}

    SmartCardService "1" *-down-> "*" Plugin : plugins
    Plugin "1" *-right-> "*" Reader : readers

+interface PoolPlugin {
  +SortedSet<String> getReaderGroupReferences()
  +Reader allocateReader(String groupReference)
  +releaseReader(Reader reader)
}
    Plugin <|- - PoolPlugin : extends

    package event #FFFFFF {
+interface ObservablePlugin {
  +addObserver(<b>final</b> PluginObserver observer)
  +removeObserver(<b>final</b> PluginObserver observer)
  +clearObservers()
  +int countObservers()
}
+interface ObservableReader {
  +addObserver(<b>final</b> ReaderObserver observer)
  +removeObserver(<b>final</b> ReaderObserver observer)
  +clearObservers()
  +int countObservers()

  +setDefaultSelections(AbstractDefaultSelectionsRequest
    selectionsR, NotificationMode notificationM)
  +setDefaultSelectionsAndStartCardDetection(AbstractDefaultSelectionsRequest
    selectionsR, NotificationMode notificationM, PollingMode pollingM)
  +startCardDetection(PollingMode pollingMode)
  +stopCardDetection()

  +finalizeCardProcessing()
}
    }
    Plugin <|- - ObservablePlugin : extends
    Reader <|- - ObservableReader : extends
  }

  PluginFactory "*" -right- "1" SmartCardService : sets >
  PluginFactory "1" - -> "1" Plugin : creates >
}

interface Plugin <<Plugin>>
interface ObservablePlugin <<Plugin>>
interface PoolPlugin <<Plugin>>
hide <<Plugin>> stereotype

interface Reader <<Reader>>
interface ObservableReader <<Reader>>
hide <<Reader>> stereotype

skinparam class {
  BackgroundColor<<Plugin>> Azure
  BorderColor<<Plugin>> Blue
  BackgroundColor<<Reader>> #EEFFEE
  BorderColor<<Reader>> Green
}
@enduml

PlantUML version 1.2020.09(Sun May 10 14:51:06 MUT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-b765.64
Operating System: Windows 10
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>